<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>无标题文档</title>
</head>

<body>
    <canvas id="canvas" width="1500" height="950" style="background:#FFF;border:#000 1px solid;"></canvas>
</body>
<script src="../config.js"></script>
<script>
    let cl = console.log
    var width0 = document.documentElement.clientWidth;
    var height0 = document.documentElement.clientHeight;
    var canvas = document.getElementById("canvas");
    var line = canvas.getContext("2d");
    line.fillStyle = "#CCFFFF"
    line.fillRect(500, 0, 500, 1000)
    line.moveTo(0, height0 / 2);
    line.lineTo(1500, height0 / 2);
    line.stroke();
    canvas.onmousedown = function(e) {
        clean()

        let points = []
        points[0] = new Point(0, height0 / 2)
        points[1] = new Point(500, e.layerY)
        points[2] = nextPoint(points[0], points[1], 500)
        points[3] = nextPoint(points[1], points[2], 500, true)

        drwaLine(points, line)
    };

    function drwaLine(points, line) {
        line.moveTo(points[0].x, points[0].y);
        for (let i = 1; i < points.length; i++) {
            line.lineTo(points[i].x, points[i].y);
            line.stroke();
        }
    }

    function nextPoint(point1, point2, length, flag) {
        let angle1 = angle(point1, point2)
        let angle2 = flag ? faster(angle1) : slow(angle1)
        let ac = getAC(length, angle2)
        return new Point(point2.x + length, point2.y + ac.a)
    }

    function clean() {
        line.clearRect(0, 0, 500, 1000);
        line.fillRect(500, 0, 500, 1000)
        line.clearRect(1000, 0, 500, 1000);
        line.beginPath();
    }
</script>

</html>